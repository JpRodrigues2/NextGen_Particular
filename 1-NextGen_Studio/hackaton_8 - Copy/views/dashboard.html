<!DOCTYPE html>
<html lang="pt-BR" ng-app="bbGamificationApp">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Floresta BB - Dashboard</title>
  <link rel="stylesheet" href="../css/dashboard.css">
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular-route.min.js"></script>
  <script src="../js/dashboard.js"></script>
</head>
<body ng-controller="DashboardController" ng-cloak>
  <div class="dashboard-container">
    <!-- Coluna Esquerda -->
    <div class="sidebar left-sidebar">
      <div class="sidebar-top">
        <button class="challenges-button" ng-click="goToChallenges()">Desafios</button>
      </div>
      
      <div class="player-info">
        <div class="player-avatar">
          <img ng-src="{{playerAvatar || '../img/default-avatar.png'}}" alt="Avatar do Jogador">
        </div>
        <div class="player-name">{{playerData.name || 'Carregando...'}}</div>
        <div class="player-xp">
          <span class="label">XP</span>
          <span class="value">{{playerData.point_categories.xp || 0}}</span>
        </div>
        <div class="player-level">
          <span class="label">N√≠vel</span>
          <span class="value">{{playerData.level.position || 0}}</span>
          <span class="level-name">{{playerData.level.level || ''}}</span>
        </div>
        <div class="player-rank">
          <span class="label">Coloca√ß√£o</span>
          <span class="value">#{{playerRank || '...'}}</span>
        </div>
        <div class="tips-button-container">
          <button class="tips-button" ng-click="openTipsCarousel()">Dicas</button>
        </div>
      </div>
      
      <div class="sidebar-bottom">
        <button class="logout-button" ng-click="logout()">Logout</button>
      </div>
    </div>
    
    <!-- √Årea Central - Floresta -->
    <div class="forest-area">
      <div class="forest-container">
        <!-- C√©u com nuvens e sol -->
        <div class="sky">
          <div class="sun"></div>
          <div class="cloud cloud-1"></div>
          <div class="cloud cloud-2"></div>
          <div class="cloud cloud-3"></div>
        </div>
        
        <!-- √Årea verde da floresta -->
        <div class="forest-green"></div>
        
        <!-- Linhas de elementos de cima para baixo -->
        <div class="forest-row row-trees-top" id="row-trees-top"></div>
        <div class="forest-row row-seeds-top" id="row-seeds-top"></div>
        
        <!-- Caminho marrom no meio -->
        <div class="dirt-path"></div>
        
        <!-- Avatar do jogador no in√≠cio do caminho -->
        <div class="player-avatar-forest">
          <img src="../img/avatar1.png" alt="Avatar do Jogador">
        </div>
        
        <!-- Linhas de elementos abaixo da rua -->
        <div class="forest-row row-fruit-trees-bottom" id="row-fruit-trees-bottom"></div>
        <div class="forest-row row-sprouts-bottom" id="row-sprouts-bottom"></div>
      </div>
    </div>
    
    <!-- Coluna Direita -->
    <div class="sidebar right-sidebar">
      <div class="items-container">
        <!-- Item est√°tico -->
        <div class="item">
          <div class="item-image">
            <img src="../img/saco.png" alt="Saco de Sementes">
          </div>
          <div class="item-count">800</div>
        </div>
        
        <!-- Itens da API -->
        <div class="item" ng-repeat="item in catalogItems">
          <div class="item-image">
            <img ng-src="{{item.image.medium.url}}" alt="{{item.name}}">
          </div>
          <div class="item-count">{{getItemCount(item._id)}}</div>
        </div>
      </div>
    </div>
    
    <!-- Sequ√™ncia de Pop-ups de Introdu√ß√£o -->
    <div class="popup-overlay" ng-if="showPopupSequence">
      <!-- Pop-up 1: Introdu√ß√£o -->
      <div class="popup-content" ng-if="currentPopup === 1">
        <div class="popup-close" ng-click="closePopupSequence()">√ó</div>
        <div class="popup-header">
          <div class="popup-icon">üå±</div>
          <h2>Bem-vindo √† Floresta BB</h2>
        </div>
        <div class="popup-body">
          <p>Como Gerente Exclusivo, voc√™ √© agora um <strong>Guardi√£o da Floresta</strong>.</p>
          <p>Sua miss√£o √© cultivar relacionamentos genu√≠nos com clientes, transformando contatos em uma floresta pr√≥spera.</p>
        </div>
        <div class="popup-footer">
          <button class="popup-button" ng-click="nextPopup()">Continuar</button>
        </div>
        <div class="popup-progress">
          <span class="progress-dot active"></span>
          <span class="progress-dot"></span>
          <span class="progress-dot"></span>
        </div>
      </div>
      
      <!-- Pop-up 2: Como funciona -->
      <div class="popup-content" ng-if="currentPopup === 2">
        <div class="popup-close" ng-click="closePopupSequence()">√ó</div>
        <div class="popup-header">
          <div class="popup-icon">üå≥</div>
          <h2>Como Sua Floresta Cresce</h2>
        </div>
        <div class="popup-body">
          <div class="growth-stages">
            <div class="stage">
              <img src="../img/seed.png" alt="Semente" class="stage-icon">
              <p>Cada <strong>contato</strong> com cliente planta uma semente</p>
            </div>
            <div class="stage">
              <img src="../img/sprout.png" alt="Broto" class="stage-icon">
              <p>Contatos <strong>cont√≠nuos</strong> fazem brotos surgirem</p>
            </div>
            <div class="stage">
              <img src="../img/tree.png" alt="√Årvore" class="stage-icon">
              <p>Uma <strong>venda</strong> faz a √°rvore crescer</p>
            </div>
            <div class="stage">
              <img src="../img/fruit-tree.png" alt="√Årvore com Frutos" class="stage-icon">
              <p>Produtos <strong>especiais</strong> geram frutos</p>
            </div>
          </div>
        </div>
        <div class="popup-footer">
          <button class="popup-button" ng-click="nextPopup()">Continuar</button>
        </div>
        <div class="popup-progress">
          <span class="progress-dot"></span>
          <span class="progress-dot active"></span>
          <span class="progress-dot"></span>
        </div>
      </div>
      
      <!-- Pop-up 3: Benef√≠cios -->
      <div class="popup-content" ng-if="currentPopup === 3">
        <div class="popup-close" ng-click="closePopupSequence()">√ó</div>
        <div class="popup-header">
          <div class="popup-icon">üèÜ</div>
          <h2>Sua Jornada de Guardi√£o</h2>
        </div>
        <div class="popup-body">
          <p>Sua floresta √© o reflexo visual do seu trabalho. Quanto mais voc√™ cultiva relacionamentos, mais seu ecossistema floresce.</p>
          <p>Complete <strong>desafios</strong>, ganhe <strong>pontos</strong> e evolua de n√≠vel:</p>
          <div class="level-progression">
            <div class="level">Iniciador da Floresta</div>
            <div class="level">Cultivador Verde</div>
            <div class="level">Construtor de Bioma</div>
            <div class="level">Guardi√£o do Ecossistema</div>
          </div>
        </div>
        <div class="popup-footer">
          <button class="popup-button" ng-click="closePopupSequence()">Come√ßar Agora</button>
        </div>
        <div class="popup-progress">
          <span class="progress-dot"></span>
          <span class="progress-dot"></span>
          <span class="progress-dot active"></span>
        </div>
      </div>
    </div>
    <!-- Carrossel de Dicas -->
    <div class="tips-carousel-overlay" ng-if="showTipsCarousel">
      <div class="tips-carousel-container">
        <div class="tips-carousel-close" ng-click="closeTipsCarousel()">√ó</div>
        <div class="tips-carousel-content">
          <!-- Slide 1 -->
          <div class="tips-slide" ng-if="currentTip === 1">
            <h3>üå± Cap√≠tulo 1 ‚Äì Uma Floresta Invis√≠vel</h3>
            <p>Em algum canto do mundo corporativo ‚Äî longe da selva de metas e do concreto das planilhas ‚Äî uma floresta silenciosa come√ßa a crescer.</p>
            <p>Ela n√£o nasce da terra comum, mas de algo mais raro: a arte de cultivar rela√ß√µes humanas genu√≠nas.</p>
          </div>
          
          <!-- Slide 2 -->
          <div class="tips-slide" ng-if="currentTip === 2">
            <h3>üå± Cap√≠tulo 2 ‚Äì O Saco de Sementes</h3>
            <p>A cada novo ciclo, um novo campo se revela.</p>
            <p>Ali, repousa um saco com 800 sementes.</p>
            <p>Elas s√£o vivas, √∫nicas. Cada uma representa uma pessoa real ‚Äî um cliente ‚Äî √† espera de ser tocado, escutado, acolhido.</p>
            <p>Mas muitas se escondem, desconfiadas, como quem teme o vento.</p>
          </div>
          
          <!-- Slide 3 -->
          <div class="tips-slide" ng-if="currentTip === 3">
            <h3>üå± Cap√≠tulo 3 ‚Äì A√ß√µes que Geram Vida</h3>
            <p>Ent√£o, algo come√ßa a acontecer.</p>
            <p>üìç Uma mensagem enviada planta uma semente.</p>
            <p>üå± Um acompanhamento cuidadoso faz o broto surgir.</p>
            <p>üå≥ Uma venda bem-feita transforma o broto em √°rvore.</p>
            <p>üçé E quando o produto certo √© entregue, a √°rvore d√° frutos raros ‚Äî dourados, cheios de valor simb√≥lico.</p>
          </div>
          
          <!-- Slide 4 -->
          <div class="tips-slide" ng-if="currentTip === 4">
            <h3>üå± Cap√≠tulo 4 ‚Äì O Valor Invis√≠vel</h3>
            <p>Mais do que a floresta que cresce, o que realmente se transforma √© o pr√≥prio solo de onde tudo nasce.</p>
            <p>Mesmo sem resposta imediata, o cuidado gera vida.</p>
            <p>Cada gesto, cada tentativa, √© reconhecida em forma de crescimento. E o terreno, antes seco, se torna f√©rtil de novo.</p>
          </div>
          
          <!-- Slide 5 -->
          <div class="tips-slide" ng-if="currentTip === 5">
            <h3>üå± Cap√≠tulo 5 ‚Äì O Guardi√£o Silencioso</h3>
            <p>Com o tempo, o campo se transforma.</p>
            <p>Flores desabrocham, animais surgem, o bioma evolui.</p>
            <p>E aquele que cultiva ‚Äî sem saber ‚Äî passa a ser visto de outra forma.</p>
            <p>Algu√©m d√° nome ao que ele construiu: Iniciador. Cultivador. Construtor. Guardi√£o.</p>
            <p>A floresta est√° ali, viva, vis√≠vel. Mas a verdadeira mudan√ßa acontece por dentro.</p>
          </div>
        </div>
        
        <div class="tips-carousel-navigation">
          <button class="nav-button prev" ng-click="prevTip()" ng-disabled="currentTip === 1">
            <span>‚Üê</span>
          </button>
          <div class="tips-carousel-indicators">
            <span class="indicator" ng-class="{'active': currentTip === 1}"></span>
            <span class="indicator" ng-class="{'active': currentTip === 2}"></span>
            <span class="indicator" ng-class="{'active': currentTip === 3}"></span>
            <span class="indicator" ng-class="{'active': currentTip === 4}"></span>
            <span class="indicator" ng-class="{'active': currentTip === 5}"></span>
          </div>
          <button class="nav-button next" ng-click="nextTip()" ng-disabled="currentTip === 5">
            <span>‚Üí</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
